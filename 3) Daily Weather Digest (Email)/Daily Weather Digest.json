{
  "name": "Daily Weather Digest",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 12
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        0,
        0
      ],
      "id": "59494753-8191-44f7-b1ba-2f20f63ae1c0",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "url": "https://api.open-meteo.com/v1/forecast?latitude=24.8607&longitude=67.0011&current_weather=true&daily=temperature_2m_max,temperature_2m_min,weathercode,windspeed_10m_max&timezone=auto",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        224,
        0
      ],
      "id": "94c7f9df-e832-4c5b-9bb7-94efa8769146",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "fromEmail": "bhuttozubair6@gmail.com",
        "toEmail": "bhuttozubair6@gmail.com",
        "subject": "Today's Weather Digest\n",
        "html": "={{ $json.html }}",
        "options": {}
      },
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2.1,
      "position": [
        672,
        0
      ],
      "id": "608a06c5-5f32-4264-a8df-d1689405288e",
      "name": "Send email",
      "webhookId": "12dd4023-ee9d-4583-b633-1c2cdf1d1e22",
      "credentials": {
        "smtp": {
          "id": "L83eOp7I7Ct32R5E",
          "name": "SMTP account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const current = $json[\"current_weather\"];\nconst daily = $json[\"daily\"];\n\n// Helper for emoji & color mapping\nfunction getWeatherEmoji(code) {\n  if (code === 0) return \"â˜€ï¸ Clear\";\n  if ([1, 2, 3].includes(code)) return \"ğŸŒ¤ï¸ Partly cloudy\";\n  if ([45, 48].includes(code)) return \"ğŸŒ«ï¸ Foggy\";\n  if ([51, 53, 55].includes(code)) return \"ğŸŒ¦ï¸ Drizzle\";\n  if ([61, 63, 65].includes(code)) return \"ğŸŒ§ï¸ Rain\";\n  if ([71, 73, 75].includes(code)) return \"â„ï¸ Snow\";\n  if ([95, 96, 99].includes(code)) return \"â›ˆï¸ Thunderstorm\";\n  return \"ğŸŒˆ N/A\";\n}\n\nfunction getBackgroundColor(code) {\n  if (code === 0) return \"#fff7b2\";\n  if ([1, 2, 3].includes(code)) return \"#d9e2ec\";\n  if ([45, 48].includes(code)) return \"#cfd8dc\";\n  if ([51, 53, 55].includes(code)) return \"#b3e5fc\";\n  if ([61, 63, 65].includes(code)) return \"#90caf9\";\n  if ([71, 73, 75].includes(code)) return \"#e1f5fe\";\n  if ([95, 96, 99].includes(code)) return \"#b39ddb\";\n  return \"#e0f7fa\";\n}\n\n// Today's info\nconst today = {\n  date: daily.time[0],\n  max: daily.temperature_2m_max[0],\n  min: daily.temperature_2m_min[0],\n  wind: daily.windspeed_10m_max[0],\n  code: daily.weathercode[0]\n};\n\n// Tomorrow's info\nconst tomorrow = {\n  date: daily.time[1],\n  max: daily.temperature_2m_max[1],\n  min: daily.temperature_2m_min[1],\n  wind: daily.windspeed_10m_max[1],\n  code: daily.weathercode[1]\n};\n\n// Pick background from today's weather\nconst bgColor = getBackgroundColor(today.code);\n\nreturn [{\n  html: `\n  <div style=\"width:100%; display:flex; justify-content:center; padding:20px;\">\n    <div style=\"font-family: Arial, sans-serif; background: ${bgColor}; border-radius: 12px; padding: 16px; max-width: 420px; width: 100%; box-sizing: border-box;\">\n      <h2 style=\"text-align:center;\">${getWeatherEmoji(today.code)} Karachi Weather</h2>\n\n      <div style=\"display:flex; justify-content:center; gap:12px; text-align:center;\">\n        <div style=\"flex:1; background:white; border-radius:8px; padding:8px;\">\n          <h3>Today</h3>\n          <p><b>ğŸ“… Date:</b> ${today.date}</p>\n          <p><b>ğŸŒ¡ï¸ Max:</b> ${today.max}Â°C</p>\n          <p><b>ğŸŒ¡ï¸ Min:</b> ${today.min}Â°C</p>\n          <p><b>ğŸ’¨ Wind:</b> ${today.wind} km/h</p>\n          <p><b>Condition:</b> ${getWeatherEmoji(today.code)}</p>\n        </div>\n\n        <div style=\"flex:1; background:white; border-radius:8px; padding:8px;\">\n          <h3>Tomorrow</h3>\n          <p><b>ğŸ“… Date:</b> ${tomorrow.date}</p>\n          <p><b>ğŸŒ¡ï¸ Max:</b> ${tomorrow.max}Â°C</p>\n          <p><b>ğŸŒ¡ï¸ Min:</b> ${tomorrow.min}Â°C</p>\n          <p><b>ğŸ’¨ Wind:</b> ${tomorrow.wind} km/h</p>\n          <p><b>Condition:</b> ${getWeatherEmoji(tomorrow.code)}</p>\n        </div>\n      </div>\n\n      <p style=\"text-align:center; margin-top:10px; font-size:12px; color:#555;\">\n        Generated at ${current.time}\n      </p>\n    </div>\n  </div>\n  `\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        448,
        0
      ],
      "id": "024fea6c-5971-467f-bf2b-016c9601a7d9",
      "name": "Code in JavaScript"
    }
  ],
  "pinData": {},
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Send email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "04caf461-9c69-4cce-b77e-da254baea70e",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "a99efae47a22f1d194a143265b1eba8cdcd83ce8e0816db371b3e2bb7bd6b018"
  },
  "id": "gKmbBW5hhySO0CwJ",
  "tags": []
}