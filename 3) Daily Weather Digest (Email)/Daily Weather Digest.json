{
  "name": "Daily Weather Digest",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 12
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        0,
        0
      ],
      "id": "59494753-8191-44f7-b1ba-2f20f63ae1c0",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "url": "https://api.open-meteo.com/v1/forecast?latitude=24.860735&longitude=67.001137&current_weather=true",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        224,
        0
      ],
      "id": "94c7f9df-e832-4c5b-9bb7-94efa8769146",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "fromEmail": "bhuttozubair6@gmail.com",
        "toEmail": "bhuttozubair6@gmail.com",
        "subject": "Today's Weather Digest\n",
        "html": "={{ $json.html }}",
        "options": {}
      },
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2.1,
      "position": [
        672,
        0
      ],
      "id": "608a06c5-5f32-4264-a8df-d1689405288e",
      "name": "Send email",
      "webhookId": "12dd4023-ee9d-4583-b633-1c2cdf1d1e22",
      "credentials": {
        "smtp": {
          "id": "L83eOp7I7Ct32R5E",
          "name": "SMTP account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const data = $json[\"current_weather\"];\n\n// Map weather codes → emoji + label\nfunction getWeatherEmoji(code) {\n  if (code === 0) return \"☀️ Clear sky\";\n  if ([1, 2, 3].includes(code)) return \"🌤️ Partly cloudy\";\n  if ([45, 48].includes(code)) return \"🌫️ Foggy\";\n  if ([51, 53, 55].includes(code)) return \"🌦️ Drizzle\";\n  if ([61, 63, 65].includes(code)) return \"🌧️ Rainy\";\n  if ([71, 73, 75].includes(code)) return \"❄️ Snowy\";\n  if ([95, 96, 99].includes(code)) return \"⛈️ Thunderstorm\";\n  return \"🌈 Weather info unavailable\";\n}\n\n// Map weather codes → background color\nfunction getBackgroundColor(code) {\n  if (code === 0) return \"#fff7b2\"; // sunny yellow\n  if ([1, 2, 3].includes(code)) return \"#d9e2ec\"; // cloudy light gray-blue\n  if ([45, 48].includes(code)) return \"#cfd8dc\"; // fog gray\n  if ([51, 53, 55].includes(code)) return \"#b3e5fc\"; // drizzle light blue\n  if ([61, 63, 65].includes(code)) return \"#90caf9\"; // rain medium blue\n  if ([71, 73, 75].includes(code)) return \"#e1f5fe\"; // snow pale blue\n  if ([95, 96, 99].includes(code)) return \"#b39ddb\"; // thunderstorm purple\n  return \"#e0f7fa\"; // default soft teal\n}\n\nconst condition = getWeatherEmoji(data.weathercode);\nconst bgColor = getBackgroundColor(data.weathercode);\n\nreturn [{\n  html: `\n  <div style=\"font-family: Arial, sans-serif; background: ${bgColor}; border-radius: 12px; padding: 16px; max-width: 360px;\">\n    <h2 style=\"text-align:center;\">${condition}</h2>\n    <p style=\"margin: 4px 0;\"><b>📍 Location:</b> Karachi</p>\n    <p style=\"margin: 4px 0;\"><b>🌡️ Temperature:</b> ${data.temperature}°C</p>\n    <p style=\"margin: 4px 0;\"><b>💨 Wind Speed:</b> ${data.windspeed} km/h</p>\n    <p style=\"margin: 4px 0;\"><b>🧭 Direction:</b> ${data.winddirection}°</p>\n    <p style=\"margin: 4px 0;\"><b>🕒 Time:</b> ${data.time}</p>\n  </div>\n  `\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        448,
        0
      ],
      "id": "024fea6c-5971-467f-bf2b-016c9601a7d9",
      "name": "Code in JavaScript"
    }
  ],
  "pinData": {},
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Send email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "8220fe86-3195-4d4a-b282-dfac7baef59b",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "a99efae47a22f1d194a143265b1eba8cdcd83ce8e0816db371b3e2bb7bd6b018"
  },
  "id": "gKmbBW5hhySO0CwJ",
  "tags": []
}